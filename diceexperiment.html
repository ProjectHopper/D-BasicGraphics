%----------------------------------------------------------------%
\newpage 

\subsection{Nested For Loops}

A nested FOR loops is simply one FOR loop nested inside another, and is quite useful for performing operations on a two dimensional grid or matrix.

Let us specify a $6 \times 6$ dimensional array, called \textbf{\textit{TwoDice}}, which has as its elements the sum of the row and column numbers. (This is used to represent the sample space (i.e. each possible outcome) from rolls of two dice.

\[  \mbox{TwoDice}[i,j] = i+j \]


\begin{framed}
\begin{verbatim}
# 6 sided dice
Die = 6

#prepare the output
TwoDice = matrix(0,nrow=Die,ncol=Die)

# i is the index for rows
 for(i in 1:Die)
   {
   #j is the index for columns
   for(j in 1:Die)
      {
      #simply assign the sum of the row and column to that element.
      TwoDice[i,j] = i+j
      }
   }

#Print out all the possible values
TwoDice
\end{verbatim}
\end{framed}

Different summations have different probabilities. We can compute the \textbf{textit{probability distribution}} using the following code:




\begin{framed}
\begin{verbatim}
table(TwoDice)
sum(table(TwoDice))

prob2Dice = table(TwoDice)/sum(table(TwoDice))

#round the output to 4 decimal places

round(prob2Dice ,4)
\end{verbatim}
\end{framed}

\textbf{Exercise} Compute the \textbf{Expected Value} of this experiment.

\begin{itemize}
\item \texttt{sum()} sum of items in a vector
\item \texttt{dim()} dimensions of a data object.
\item \texttt{prod()} product of items in a vector.
\end{itemize}



\begin{verbatim}
> sum(TwoDice)
[1] 252
> dim(TwoDice)
[1] 6 6
> prod(dim(TwoDice))
[1] 36
> sum(TwoDice)/prod(dim(TwoDice))
[1] 7
\end{verbatim}

\textbf{Exercise} Suppose we are interested in the absolute difference of the values of two 8-sided dice. What is the probability distribution? What is the expected value?

%------------------------------------------------------------------------------%
\section*{Simulation Study of Dice Rolls Sums Experiment}
\begin{itemize}
\item Lets consider this Dice Roll Summation experiment. 
\item 
We will perform the experiment 100000 times, and see what sort of distribution of summations we get.
\item We will save the results in a vector called \texttt{Sums}.
\end{itemize}
\begin{framed}
\begin{verbatim}
Sums=numeric()    # Initialize An Empty Vector
M=30000  # Number of Iterations

for (i in 1:M)
    {
     NewSum=sum(sample(Dice,100,replace=TRUE))
     Sums = c(Sums, NewSum)
     }
\end{verbatim}
\end{framed}
\begin{itemize}
\item We can perform some basic statistical operations to study this vector. 
\item Suppose that we are particularly interested in the extremes: \begin{itemize}\item[$\bullet$] How many times was there a summation less than 300, \item[$\bullet$] How many times was there a summation greated than 400? \item[$\bullet$] (As it turns out : around 1.5\% probability in each case)
\end{itemize}
\end{itemize}
\begin{verbatim}
> length(Sums[Sums<300])
[1] 144
> length(Sums[Sums>400])
[1] 160  
\end{verbatim}

Lets us look at a histogram (a type of bar chart) of the \texttt{Sums} vector ( Use around breaks =100 to specify more intervals). What sort of shape is this histogram?
\begin{framed}
\begin{verbatim}
hist(Sums, breaks=100)
\end{verbatim}
\end{framed}
\newpage
\subsection{Central Limit Theorem}
\begin{itemize}
\item This is a very crude introduction to the Central Limit Theorem. 
\item Even though the \textit{Dice Rolls} are not normally distributed, the distribution of summations, are described in this experiment, are from a normally distributed sampling population.
\item Also consider the probability of getting a sum more than 400. Recalling that dice simulation is for fair dice, the probability of getting a score more extreme than 400 is 1.5\% approximately. \item This provides (again crudely) an introduction to the idea of p-values , which are used a lot in statistical inference procedures. 
\end{itemize}
%================================================%
\newpage

\begin{itemize}
\item Suppose it was not certain whether a die was fair or crooked (favouring higher values such as 4,5 and 6).
\item The 100 dice roll experiment was performed and the score turned out to be 400. 
\item It would be a very unusual outcome for a fair die, but not impossible. 
\item For crooked dice, biased in the manner described, larger summations would be expected and a score of approximately 400 would be relatively common. 
\item Would you think the die was fair or crooked?
\item Suppose you got a sum of 350? Consider that the dice may be crooked, but you got a relatively low value.
\end{itemize}

Arbitrarily, let us consider a crooked dice, where 4,5 and 6 are twice a likely to appear. Try out the following code.
\newpage
\large
\begin{verbatim}
CrookedDice=c(1,2,3,4,4,5,5,6,6)
sum(sample(CrookedDice,100,replace=TRUE))


CrookSums=numeric()    # Initialize An Empty Vector
M=30000  # Number of Iterations

for (i in 1:M)
    {
     NewSum=sum(sample(CrookedDice,100,replace=TRUE))
     CrookSums = c(CrookSums, NewSum)
     }



FairDice=1:6
sum(sample(FairDice,100,replace=TRUE))

FairSums=numeric()    # Initialize An Empty Vector
M=30000  # Number of Iterations

for (i in 1:M)
    {
     NewSum=sum(sample(FairDice,100,replace=TRUE))
     FairSums = c(FairSums, NewSum)
     }


# set out plot
plot( c(FairSums, CrookSums),c(rep(1,M),rep(2,M)), pch=".")

# Re-lay points 
points( FairSums , rep(1,M) , pch =16, col="red")
points( CrookSums, rep(2,M), pch=17, col="green")

# add vertical lines
abline(v=350, lty =2 )
abline(v=400, lty =2 )

\end{verbatim}
